<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui">
<f:view>
<h:head><title> Balorazioak eta erreklamazioak</title>
    <link rel="stylesheet" href="css/kbaler.css" />
</h:head>

<h:body>
<br></br>
    <div class="query-container">

<div class="top-info">
        <span class="email">
            <h:outputText value="#{driver.posta}"/>
        </span>

        <h:panelGroup id="moneyPanel">
    <span class="money">
        <h:outputText value="#{konbaler.tot}">
            <f:convertNumber type="number" maxFractionDigits="2"/>
        </h:outputText>â‚¬
    </span>
</h:panelGroup>

    </div>

<h:form>

<h3>Balorazioak eta erreklamazioak</h3>

<div class="reserva-actions">
            <h:commandButton value="Itzuli" action="#{driver.itzuli}" immediate="true"
                             styleClass="btn-secondary-link" />
        </div>
        <br></br>
<p:messages id="msgs" globalOnly="true" />


    <p:selectBooleanCheckbox value="#{konbaler.showBalorazioak}" itemLabel="Balorazioak">
        <p:ajax update="@form"/>
    </p:selectBooleanCheckbox>

    <br/>

    <p:selectBooleanCheckbox value="#{konbaler.showErreklamazioak}" itemLabel="Erreklamazioak">
        <p:ajax update="@form"/>
    </p:selectBooleanCheckbox>

    <br/><br/>

  
    <p:outputPanel id="BalorazioakTable" rendered="#{konbaler.showBalorazioak}">
        <h3>Balorazioak</h3>

        <p:dataTable value="#{konbaler.balList}" var="b"
                     emptyMessage="Ez dago baloraziorik">

            <p:column headerText="Noiz" sortBy="#{er.ride.date}">
        #{b.erreserba.ride.date}
    </p:column>
    
    <p:column headerText="Nondik">
        #{b.erreserba.ride.froma}
    </p:column>

    <p:column headerText="Nora">
        #{b.erreserba.ride.toa}
    </p:column>

    <p:column headerText="Eserleku kopurua">
        #{b.erreserba.places}
    </p:column>
    
    <p:column headerText="Prezioa">
    <h:outputText value="#{b.erreserba.ride.price*b.erreserba.places}">
        <f:convertNumber type="number" maxFractionDigits="2" />
    </h:outputText>â‚¬
    </p:column>
    
     

           <p:column headerText="Balorazioa">
    			<p:rating 
        value="#{b.balorazioa}" 
        stars="5" 
        cancel="false"
        readonly="true" />
				</p:column>

        </p:dataTable>
        <br/>
    </p:outputPanel>



    <p:outputPanel id="ErreklamazioakTable" rendered="#{konbaler.showErreklamazioak}">
<h3>
    Erreklamazioak 
    <span style="font-size:0.9em; margin-left:15px;">
        <span style="color:green;">ðŸŸ¢ Onartu</span> 
        <span style="color:red;">ðŸ”´ Baztertu</span>
    </span>
</h3>
        <p:dataTable value="#{konbaler.errList}" var="r"
                     emptyMessage="Ez dago erreklamaziorik">

            <p:column headerText="Noiz" sortBy="#{er.ride.date}">
        		#{r.erreserba.ride.date}
    		</p:column>
    
    		<p:column headerText="Nondik">
    		    #{r.erreserba.ride.froma}
    		</p:column>

    		<p:column headerText="Nora">
     		   #{r.erreserba.ride.toa}
    		</p:column>

    		<p:column headerText="Eserleku kopurua">
     		   #{r.erreserba.places}
    		</p:column>
    
     		<p:column headerText="Prezioa">
    <h:outputText value="#{r.erreserba.ride.price*r.erreserba.places}">
        <f:convertNumber type="number" maxFractionDigits="2" />
    </h:outputText>â‚¬
    </p:column>

            <p:column headerText="Arrazoia">
                #{r.title}
            </p:column>
            <p:column headerText="Deskribapena">
                #{r.description}
            </p:column>
            <p:column headerText="Bidaiaria">
                #{r.email}
            </p:column>
           <p:column headerText="" style="text-align:center; width:120px;">
    <div style="display:flex; justify-content:center; gap:8px;">
        
        <p:commandButton 
            value="" 
            styleClass="rounded-button ui-button-success"
            style="width:35px; height:35px; font-size:18px; padding:0;"
            action="#{konbaler.onartuErr(r)}"
            update="@form :moneyPanel"
            title="Onartu"
        />

        <p:commandButton 
            value="" 
            styleClass="rounded-button ui-button-danger"
            style="width:35px; height:35px; font-size:18px; padding:0;"
            action="#{konbaler.baztertuErr(r)}"
            update="@form :moneyPanel"
            title="Ukatu"
        />

    </div>
</p:column>

        </p:dataTable>
    </p:outputPanel>
   
    
   

</h:form>
    </div>
</h:body>
</f:view>
</html>